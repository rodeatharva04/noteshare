{% extends 'base.html' %}

{% block content %}
<style>
    .letter-spacing-2 { letter-spacing: 5px; }
    
    /* Map dynamic context colors to your Base.html CSS Variables */
    /* !important ensures they override any default Bootstrap behavior */
    .bg-gradient-primary { background: var(--grad-primary) !important; }
    .bg-gradient-danger  { background: var(--grad-danger) !important; }
    .bg-gradient-success { background: var(--grad-success) !important; }
    
    /* Custom gradients for Info/Warning matching the theme */
    .bg-gradient-info    { background: linear-gradient(135deg, var(--brand-accent), #0dcaf0) !important; }
    .bg-gradient-warning { background: linear-gradient(135deg, var(--color-warning), #ffca2c) !important; }
</style>

<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
    <!-- card-modern for unified styling -->
    <div class="card-modern" style="max-width: 450px; width: 100%;">
        
        <!-- Header: Dynamic Gradient based on 'color' variable -->
        <div class="card-header-modern bg-gradient-{{ color|default:'primary' }}">
            <div class="mb-2">
                <i class="fas fa-{{ icon|default:'shield-alt' }} fa-3x text-white opacity-75"></i>
            </div>
            <h3 class="fw-bold mb-0 text-white">{{ title }}</h3>
        </div>

        <div class="card-body p-4 p-md-5 text-center">
            
            <!-- Message: Changed text-muted to text-white opacity-75 for better contrast -->
            <p class="text-white opacity-75 mb-4">{{ message|safe }}</p>

            <form method="POST">
                {% csrf_token %}
                <div class="mb-4">
                    <!-- OTP Input: Inherits dark style from base.html .form-control -->
                    <input type="text" name="code" 
                           class="form-control form-control-lg text-center fw-bold fs-3 letter-spacing-2 text-white" 
                           placeholder="123456" maxlength="6" required autofocus
                           style="border: 1px solid var(--border-color); background-color: var(--surface-input);">
                </div>
                
                <div class="d-grid">
                    <!-- Button: Uses brand shape, but overrides color with dynamic gradient -->
                    <button type="submit" class="btn-brand shadow-lg fw-bold bg-gradient-{{ color|default:'primary' }}">
                        {{ btn_text|default:'Verify Code' }}
                    </button>
                </div>
            </form>
        </div>

        <!-- Footer -->
        <div class="card-footer bg-transparent text-center py-4" style="border-top: 1px solid var(--border-color);">
            <a href="{% url 'home' %}" class="small text-decoration-none text-white opacity-50 hover-warning">
                Cancel
            </a>
        </div>
    </div>
</div>
{% endblock %}